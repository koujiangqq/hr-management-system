# ðŸš€ VPSå¿«é€Ÿéƒ¨ç½²æŒ‡å—

## ä¸€é”®éƒ¨ç½²ï¼ˆæŽ¨èï¼‰

### 1. è¿žæŽ¥åˆ°ä½ çš„VPSæœåŠ¡å™¨
```bash
ssh root@ä½ çš„æœåŠ¡å™¨IP
# æˆ–è€…
ssh ç”¨æˆ·å@ä½ çš„æœåŠ¡å™¨IP
```

### 2. è¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
```bash
# ä¸‹è½½å¹¶è¿è¡Œéƒ¨ç½²è„šæœ¬
curl -fsSL https://raw.githubusercontent.com/koujiangqq/hr-management-system/main/scripts/deploy-vps.sh | bash
```

### 3. ç­‰å¾…éƒ¨ç½²å®Œæˆ
è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ“ä½œï¼š
- âœ… æ£€æµ‹æ“ä½œç³»ç»Ÿ
- âœ… å®‰è£…Dockerå’ŒDocker Compose
- âœ… å…‹éš†é¡¹ç›®ä»£ç 
- âœ… é…ç½®çŽ¯å¢ƒå˜é‡
- âœ… åˆ›å»ºæ•°æ®ç›®å½•
- âœ… é…ç½®é˜²ç«å¢™
- âœ… å¯åŠ¨æ‰€æœ‰æœåŠ¡
- âœ… åˆ›å»ºç›‘æŽ§å’Œå¤‡ä»½è„šæœ¬

### 4. è®¿é—®ç³»ç»Ÿ
éƒ¨ç½²å®ŒæˆåŽï¼Œä½ å¯ä»¥é€šè¿‡ä»¥ä¸‹åœ°å€è®¿é—®ï¼š
- **å‰ç«¯ç•Œé¢**: http://ä½ çš„æœåŠ¡å™¨IP:3000
- **åŽç«¯API**: http://ä½ çš„æœåŠ¡å™¨IP:8080/api
- **MinIOæŽ§åˆ¶å°**: http://ä½ çš„æœåŠ¡å™¨IP:9001

## æ‰‹åŠ¨éƒ¨ç½²

å¦‚æžœä¸€é”®éƒ¨ç½²å¤±è´¥ï¼Œå¯ä»¥æŒ‰ç…§ä»¥ä¸‹æ­¥éª¤æ‰‹åŠ¨éƒ¨ç½²ï¼š

### 1. å®‰è£…ä¾èµ–
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install -y docker.io docker-compose git

# CentOS/RHEL
sudo yum install -y docker docker-compose git
sudo systemctl start docker
sudo systemctl enable docker
```

### 2. å…‹éš†é¡¹ç›®
```bash
sudo mkdir -p /opt/hr-system
cd /opt/hr-system
sudo git clone https://github.com/koujiangqq/hr-management-system.git .
sudo chown -R $USER:$USER /opt/hr-system
```

### 3. é…ç½®çŽ¯å¢ƒ
```bash
# åˆ›å»ºçŽ¯å¢ƒé…ç½®æ–‡ä»¶
cat > .env << EOF
DB_PASSWORD=$(openssl rand -base64 16)
JWT_SECRET=$(openssl rand -base64 32)
MINIO_SECRET_KEY=$(openssl rand -base64 16)
SERVER_IP=$(curl -s ifconfig.me)
EOF
```

### 4. å¯åŠ¨æœåŠ¡
```bash
# åˆ›å»ºæ•°æ®ç›®å½•
mkdir -p data/{mysql,minio,redis} logs

# å¯åŠ¨æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker-compose ps
```

## ç³»ç»Ÿè¦æ±‚

### æœ€ä½Žé…ç½®
- **CPU**: 2æ ¸å¿ƒ
- **å†…å­˜**: 2GB
- **å­˜å‚¨**: 20GB
- **ç³»ç»Ÿ**: Ubuntu 18.04+ / CentOS 7+

### æŽ¨èé…ç½®
- **CPU**: 4æ ¸å¿ƒ
- **å†…å­˜**: 4GB
- **å­˜å‚¨**: 50GB SSD

## ç«¯å£è¦æ±‚

ç¡®ä¿ä»¥ä¸‹ç«¯å£åœ¨é˜²ç«å¢™ä¸­å¼€æ”¾ï¼š
- **80**: HTTP (å¯é€‰ï¼Œç”¨äºŽNginxåå‘ä»£ç†)
- **443**: HTTPS (å¯é€‰ï¼Œç”¨äºŽSSL)
- **3000**: å‰ç«¯æœåŠ¡
- **8080**: åŽç«¯API
- **9001**: MinIOæŽ§åˆ¶å°

## å¸¸ç”¨ç®¡ç†å‘½ä»¤

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd /opt/hr-system

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps

# æŸ¥çœ‹æ—¥å¿—
docker-compose logs -f

# é‡å¯æœåŠ¡
docker-compose restart

# åœæ­¢æœåŠ¡
docker-compose down

# æ›´æ–°ä»£ç 
git pull origin main
docker-compose up -d --build

# ç³»ç»Ÿç›‘æŽ§
./monitor.sh

# æ‰‹åŠ¨å¤‡ä»½
./backup.sh
```

## é»˜è®¤è´¦å·

- **ç®¡ç†å‘˜**: admin / admin123
- **HRç»ç†**: hr_manager / hr123456

## æ•…éšœæŽ’é™¤

### 1. æœåŠ¡æ— æ³•å¯åŠ¨
```bash
# æŸ¥çœ‹è¯¦ç»†æ—¥å¿—
docker-compose logs æœåŠ¡å

# é‡æ–°æž„å»ºé•œåƒ
docker-compose build --no-cache

# æ¸…ç†Dockerèµ„æº
docker system prune -a
```

### 2. ç«¯å£è¢«å ç”¨
```bash
# æŸ¥çœ‹ç«¯å£å ç”¨
sudo netstat -tlnp | grep :ç«¯å£å·

# åœæ­¢å ç”¨ç«¯å£çš„æœåŠ¡
sudo systemctl stop æœåŠ¡å
```

### 3. å†…å­˜ä¸è¶³
```bash
# æ·»åŠ äº¤æ¢ç©ºé—´
sudo fallocate -l 2G /swapfile
sudo chmod 600 /swapfile
sudo mkswap /swapfile
sudo swapon /swapfile
```

### 4. æ•°æ®åº“è¿žæŽ¥å¤±è´¥
```bash
# æ£€æŸ¥MySQLå®¹å™¨
docker-compose logs mysql

# é‡å¯MySQL
docker-compose restart mysql

# è¿›å…¥MySQLå®¹å™¨
docker-compose exec mysql mysql -u root -p
```

## å®‰å…¨å»ºè®®

1. **ä¿®æ”¹é»˜è®¤å¯†ç **
   - ä¿®æ”¹æ•°æ®åº“å¯†ç 
   - ä¿®æ”¹MinIOå¯†é’¥
   - ä¿®æ”¹ç³»ç»Ÿç™»å½•å¯†ç 

2. **é…ç½®SSLè¯ä¹¦**
   ```bash
   # å®‰è£…Certbot
   sudo apt install certbot
   
   # èŽ·å–SSLè¯ä¹¦
   sudo certbot certonly --standalone -d ä½ çš„åŸŸå
   ```

3. **å®šæœŸå¤‡ä»½**
   - ç³»ç»Ÿå·²è‡ªåŠ¨è®¾ç½®æ¯æ—¥2ç‚¹å¤‡ä»½
   - æ‰‹åŠ¨å¤‡ä»½ï¼š`./backup.sh`

4. **ç›‘æŽ§ç³»ç»Ÿ**
   - å®šæœŸè¿è¡Œï¼š`./monitor.sh`
   - æŸ¥çœ‹ç³»ç»Ÿèµ„æºä½¿ç”¨æƒ…å†µ

## æ€§èƒ½ä¼˜åŒ–

1. **æ•°æ®åº“ä¼˜åŒ–**
   - å®šæœŸæ¸…ç†æ—¥å¿—
   - ä¼˜åŒ–æŸ¥è¯¢ç´¢å¼•
   - è°ƒæ•´è¿žæŽ¥æ± å¤§å°

2. **ç¼“å­˜ä¼˜åŒ–**
   - é…ç½®Rediså†…å­˜é™åˆ¶
   - è®¾ç½®åˆé€‚çš„è¿‡æœŸç­–ç•¥

3. **æ–‡ä»¶å­˜å‚¨ä¼˜åŒ–**
   - å®šæœŸæ¸…ç†ä¸´æ—¶æ–‡ä»¶
   - é…ç½®æ–‡ä»¶åŽ‹ç¼©

## æŠ€æœ¯æ”¯æŒ

å¦‚æžœé‡åˆ°é—®é¢˜ï¼š
1. æŸ¥çœ‹éƒ¨ç½²æ—¥å¿—
2. è¿è¡Œç³»ç»Ÿç›‘æŽ§è„šæœ¬
3. æ£€æŸ¥é˜²ç«å¢™é…ç½®
4. è”ç³»æŠ€æœ¯æ”¯æŒ

---

**æ³¨æ„**: é¦–æ¬¡éƒ¨ç½²å¯èƒ½éœ€è¦10-15åˆ†é’Ÿä¸‹è½½Dockeré•œåƒï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚